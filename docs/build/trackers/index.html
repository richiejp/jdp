<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Trackers · JDP</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.svg" alt="JDP logo"/></a><h1>JDP</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../bug-tagging/">Bug Tagging</a></li><li><a class="toctext" href="../user-preferences/">User Preferences</a></li><li><span class="toctext">Reference</span><ul><li><a class="toctext" href="../bugrefs/">BugRefs</a></li><li><a class="toctext" href="../conf/">Conf</a></li><li><a class="toctext" href="../functional/">Functional</a></li><li><a class="toctext" href="../repository/">Repository</a></li><li class="current"><a class="toctext" href>Trackers</a><ul class="internal"><li><a class="toctext" href="#Tracker-1">Tracker</a></li><li><a class="toctext" href="#Trackers.OpenQA-1">Trackers.OpenQA</a></li><li><a class="toctext" href="#Trackers.Bugzilla-1">Trackers.Bugzilla</a></li><li><a class="toctext" href="#Trackers.Redmine-1">Trackers.Redmine</a></li><li><a class="toctext" href="#Trackers.RocketChat-1">Trackers.RocketChat</a></li><li><a class="toctext" href="#Trackers.Mailx-1">Trackers.Mailx</a></li><li><a class="toctext" href="#Spammer-1">Spammer</a></li></ul></li></ul></li><li><a class="toctext" href="../development/">Development</a></li><li><a class="toctext" href="../reports/">Reports</a></li></ul></nav><article id="docs"><header><nav><ul><li>Reference</li><li><a href>Trackers</a></li></ul><a class="edit-page" href="https://github.com//blob/master/docs/src/trackers.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Trackers</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Trackers-1" href="#Trackers-1">Trackers</a></h1><ul><li><a href="#JDP.Tracker.AbstractSession"><code>JDP.Tracker.AbstractSession</code></a></li><li><a href="#JDP.Tracker.Api"><code>JDP.Tracker.Api</code></a></li><li><a href="#JDP.Tracker.Instance"><code>JDP.Tracker.Instance</code></a></li><li><a href="#JDP.Tracker.Instance-Tuple{String}"><code>JDP.Tracker.Instance</code></a></li><li><a href="#JDP.Tracker.StaticSession"><code>JDP.Tracker.StaticSession</code></a></li><li><a href="#JDP.Tracker.TrackerRepo"><code>JDP.Tracker.TrackerRepo</code></a></li><li><a href="#JDP.Tracker.ensure_login!-Union{Tuple{Instance{S}}, Tuple{S}} where S&lt;:JDP.Tracker.AbstractSession"><code>JDP.Tracker.ensure_login!</code></a></li><li><a href="#JDP.Tracker.get_tracker-Tuple{AbstractString}"><code>JDP.Tracker.get_tracker</code></a></li><li><a href="#JDP.Tracker.load_trackers-Tuple{}"><code>JDP.Tracker.load_trackers</code></a></li><li><a href="#JDP.Tracker.login-Tuple{AbstractString}"><code>JDP.Tracker.login</code></a></li><li><a href="#JDP.Trackers.OpenQA.NativeSession"><code>JDP.Trackers.OpenQA.NativeSession</code></a></li><li><a href="#JDP.Trackers.OpenQA.NotifyPref"><code>JDP.Trackers.OpenQA.NotifyPref</code></a></li><li><a href="#JDP.Trackers.OpenQA.Session"><code>JDP.Trackers.OpenQA.Session</code></a></li><li><a href="#JDP.Trackers.OpenQA.TestSeq"><code>JDP.Trackers.OpenQA.TestSeq</code></a></li><li><a href="#JDP.Trackers.OpenQA.extract_toml-Tuple{AbstractString}"><code>JDP.Trackers.OpenQA.extract_toml</code></a></li><li><a href="../user-preferences/#JDP.Trackers.OpenQA.extract_toml"><code>JDP.Trackers.OpenQA.extract_toml</code></a></li><li><a href="../user-preferences/#JDP.Trackers.OpenQA.load_notify_preferences"><code>JDP.Trackers.OpenQA.load_notify_preferences</code></a></li><li><a href="#JDP.Trackers.OpenQA.load_notify_preferences-Tuple{String}"><code>JDP.Trackers.OpenQA.load_notify_preferences</code></a></li><li><a href="#JDP.Trackers.Mailx.post_message-Tuple{JDP.Trackers.Mailx.Session,AbstractString,AbstractString,AbstractString}"><code>JDP.Trackers.Mailx.post_message</code></a></li><li><a href="#JDP.Spammer.Message"><code>JDP.Spammer.Message</code></a></li><li><a href="#JDP.Spammer.post_message-Tuple{JDP.Spammer.Message}"><code>JDP.Spammer.post_message</code></a></li><li><a href="#JDP.Spammer.post_message-Tuple{JDP.Tracker.Instance,JDP.Spammer.Message}"><code>JDP.Spammer.post_message</code></a></li><li><a href="#JDP.Spammer.post_message-Tuple{JDP.Tracker.Instance{JDP.Trackers.Mailx.Session},JDP.Spammer.Message}"><code>JDP.Spammer.post_message</code></a></li></ul><h2><a class="nav-anchor" id="Tracker-1" href="#Tracker-1">Tracker</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker" href="#JDP.Tracker"><code>JDP.Tracker</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>Trackers are external sources of information which track some kind of item.</p><p>For example Bugzilla and OpenQA are both considered trackers by JDP. Bugzilla tracks bugs and OpenQA tracks test results. GitWeb could also be considered a tracker which tracks git commits. Some services may track a number of different items.</p><p><strong>Design note</strong></p><p>Hopefully new trackers can eventually be declaratively defined in conf/trackers.toml. However this is difficult when most of them seem to use different authentication methods and different data formats. So we begin with tracker specific code (e.g. trackers/Bugzilla.jl) and then try to generialise them if feasible.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.Api" href="#JDP.Tracker.Api"><code>JDP.Tracker.Api</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Information about a tracker&#39;s API</p><p>This is a generic interface for tracker features which are simple/standard enough to configure via conf/trackers.toml. Tracker specific features are handled by Tracker specific methods dispatched on the Session type parameter</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.TrackerRepo" href="#JDP.Tracker.TrackerRepo"><code>JDP.Tracker.TrackerRepo</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Tracker Repository</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.get_tracker-Tuple{AbstractString}" href="#JDP.Tracker.get_tracker-Tuple{AbstractString}"><code>JDP.Tracker.get_tracker</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Get a single tracker from its TLA</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.load_trackers-Tuple{}" href="#JDP.Tracker.load_trackers-Tuple{}"><code>JDP.Tracker.load_trackers</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Get a collection of all Trackers</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.AbstractSession" href="#JDP.Tracker.AbstractSession"><code>JDP.Tracker.AbstractSession</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A connection to a tracker API</p><p>Each Tracker which supports the concept of logging in should create a struct like the following</p><pre><code class="language-julia">struct Session &lt;: Tracker.AbstractSession
    # Tracker specific session data...
end</code></pre><p>and also implement <a href="#JDP.Tracker.ensure_login!-Union{Tuple{Instance{S}}, Tuple{S}} where S&lt;:JDP.Tracker.AbstractSession"><code>ensure_login!</code></a></p><div class="admonition warn"><div class="admonition-title">Warn</div><div class="admonition-text"><p>This module looks for a struct specifically called <code>Session</code> when automatically loading the trackers. So the name is significant.</p></div></div></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.Instance" href="#JDP.Tracker.Instance"><code>JDP.Tracker.Instance</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Information about a Tracker&#39;s instance</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.Instance-Tuple{String}" href="#JDP.Tracker.Instance-Tuple{String}"><code>JDP.Tracker.Instance</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Create a minimal tracker instance for an unknown tracker</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.StaticSession" href="#JDP.Tracker.StaticSession"><code>JDP.Tracker.StaticSession</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Not really a session</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.ensure_login!-Union{Tuple{Instance{S}}, Tuple{S}} where S&lt;:JDP.Tracker.AbstractSession" href="#JDP.Tracker.ensure_login!-Union{Tuple{Instance{S}}, Tuple{S}} where S&lt;:JDP.Tracker.AbstractSession"><code>JDP.Tracker.ensure_login!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Returns an active session</p><p>If the tracker already has an active session then return it, otherwise create one. The tracker specific modules should override this</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Tracker.login-Tuple{AbstractString}" href="#JDP.Tracker.login-Tuple{AbstractString}"><code>JDP.Tracker.login</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Get an active session object for the tracker with the given TLA</p></div></div></section><h2><a class="nav-anchor" id="Trackers.OpenQA-1" href="#Trackers.OpenQA-1">Trackers.OpenQA</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.NativeSession" href="#JDP.Trackers.OpenQA.NativeSession"><code>JDP.Trackers.OpenQA.NativeSession</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Use native Julia HTTP library to access OpenQA</p><p>Unfortunately this doesn&#39;t work so well because:</p><ol><li>JuliaWeb&#39;s current HTTP SSL implementation i.e. the MbedTLS wrapper</li><li>OpenQA&#39;s wierd authentication which is difficult to replicate outside of Perl.</li></ol></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.NotifyPref" href="#JDP.Trackers.OpenQA.NotifyPref"><code>JDP.Trackers.OpenQA.NotifyPref</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A single notification preference</p><p>This can be matched against to decide whether to send a notification.</p><p><strong>Fields</strong></p><ul><li><p><code>group::JDP.Trackers.OpenQA.Link{JDP.Trackers.OpenQA.JobGroup}</code></p><p>A link to the job group this preference is valid for</p></li><li><p><code>user::String</code></p><p>The user this preference is for</p></li><li><p><code>pattern::String</code></p><p>Some arbitrary pattern for matching against test properties</p></li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.Session" href="#JDP.Trackers.OpenQA.Session"><code>JDP.Trackers.OpenQA.Session</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Makes requests to OpenQA using the official OpenQA client script</p><p>I really hate this, but we cache the data locally anyway due to the slowness of fetching from OpenQA, so the overhead of calling a Perl script can be ignored. Also see OpenQA::NativeSession&#39;s docs.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.TestSeq" href="#JDP.Trackers.OpenQA.TestSeq"><code>JDP.Trackers.OpenQA.TestSeq</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Test Sequence - A row in the diff matrix</p><pre><code class="language-none">* builds: test results for each build where a result could be found</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.extract_toml-Tuple{AbstractString}" href="#JDP.Trackers.OpenQA.extract_toml-Tuple{AbstractString}"><code>JDP.Trackers.OpenQA.extract_toml</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">dict = extract_toml(&quot;text... &lt;code data-type=&#39;TOML&#39;&gt;[JDP.some.toml]&lt;br&gt; ... &lt;/code&gt;&quot;)</code></pre><p>Find the first instance of toml contained inside some text formatted for OpenQA job comments or group descriptions.</p><p>Only toml inside a the first code tag will be parsed. Code tags which don&#39;t have a <code>data-type</code> of TOML will be ignored. The <code>&lt;br&gt;</code> tags just effect the appearance in OpenQA. You should include them to make it readable.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.load_notify_preferences-Tuple{String}" href="#JDP.Trackers.OpenQA.load_notify_preferences-Tuple{String}"><code>JDP.Trackers.OpenQA.load_notify_preferences</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">load_notify_preferences(from::String) -&gt; Array{JDP.Trackers.OpenQA.NotifyPref,1}
</code></pre><p>This loads and parses TOML formatted user notification preferences stored in the OpenQA job group descriptions. Each user can set one or more patterns which could be matched against test suit, test name, test flags, etc. or something else depending on the script.</p><p><strong>Arguments</strong></p><ul><li><code>from</code>: This is the TLA of the tracker (e.g. &quot;osd&quot;) where the         description text should be loaded from.</li></ul><p><strong>OpenQA Input</strong></p><p>The raw OpenQA job group description text should contain something like the following.</p><pre><code class="language-toml">&lt;code data-type=&#39;TOML&#39;&gt;
[JDP.notify.on-status-diff] &lt;br&gt;
rpalethorpe = [&#39;LTP&#39;, &#39;OpenQA&#39;] &lt;br&gt;
metan = &#39;.&#39; &lt;br&gt;
pvorel = &#39;LTP&#39; &lt;br&gt;
&lt;/code&gt;</code></pre><p>For each user name you can set a single string or a vector of strings. These may then be interpreted as plain text, globs or Regexs depending on the script.</p><p><strong>Returns</strong></p><p>This returns a vector of <a href="#JDP.Trackers.OpenQA.NotifyPref"><code>NotifyPref</code></a> structures. You may wish to call <a href="@ref"><code>Functional.groupby</code></a> on these to build an index.</p></div></div></section><h2><a class="nav-anchor" id="Trackers.Bugzilla-1" href="#Trackers.Bugzilla-1">Trackers.Bugzilla</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.Bugzilla" href="#JDP.Trackers.Bugzilla"><code>JDP.Trackers.Bugzilla</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>Allows retrieving bug information from Bugzilla</p></div></div></section><h2><a class="nav-anchor" id="Trackers.Redmine-1" href="#Trackers.Redmine-1">Trackers.Redmine</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.Redmine" href="#JDP.Trackers.Redmine"><code>JDP.Trackers.Redmine</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>Allows retrieving issue/bug information from Redmine</p></div></div></section><h2><a class="nav-anchor" id="Trackers.RocketChat-1" href="#Trackers.RocketChat-1">Trackers.RocketChat</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.RocketChat" href="#JDP.Trackers.RocketChat"><code>JDP.Trackers.RocketChat</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>Send messages on Rocket Chat</p></div></div></section><h2><a class="nav-anchor" id="Trackers.Mailx-1" href="#Trackers.Mailx-1">Trackers.Mailx</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.Mailx" href="#JDP.Trackers.Mailx"><code>JDP.Trackers.Mailx</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>Sends e-mails with the mailx command</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Spammer.post_message-Tuple{JDP.Tracker.Instance{JDP.Trackers.Mailx.Session},JDP.Spammer.Message}" href="#JDP.Spammer.post_message-Tuple{JDP.Tracker.Instance{JDP.Trackers.Mailx.Session},JDP.Spammer.Message}"><code>JDP.Spammer.post_message</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Spammer.post_message(tracker, message::Spammer.Message)</code></pre><p>Maybe send a broadcast/Spammer message to the e-mail list which is configured as the from address for this session. Ignores the message if it is a single line or the e-mail address is not in the mentions list.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.Mailx.post_message-Tuple{JDP.Trackers.Mailx.Session,AbstractString,AbstractString,AbstractString}" href="#JDP.Trackers.Mailx.post_message-Tuple{JDP.Trackers.Mailx.Session,AbstractString,AbstractString,AbstractString}"><code>JDP.Trackers.Mailx.post_message</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">post_message(session, to, subject, message::AbstractString)</code></pre><p>Send an email message using the given session</p></div></div></section><h2><a class="nav-anchor" id="Spammer-1" href="#Spammer-1">Spammer</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Spammer" href="#JDP.Spammer"><code>JDP.Spammer</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>Broadcast messages using multiple Trackers</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Spammer.Message" href="#JDP.Spammer.Message"><code>JDP.Spammer.Message</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Generic message body and meta data</p><ul><li>body: The message text. Some trackers may use the first line as the subject.</li><li>mentions: Users or accounts to &#39;mention&#39; (Rocket Chat) or CC (email).            Usually this means adding something like <code>@user</code> to the message.</li></ul><p>Trackers may interpret the message content differently. However each tracker should try to use the given information in a way which is analogous to the other trackers.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Spammer.post_message-Tuple{JDP.Spammer.Message}" href="#JDP.Spammer.post_message-Tuple{JDP.Spammer.Message}"><code>JDP.Spammer.post_message</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Send message using all trackers configured for sending broadcasts</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Spammer.post_message-Tuple{JDP.Tracker.Instance,JDP.Spammer.Message}" href="#JDP.Spammer.post_message-Tuple{JDP.Tracker.Instance,JDP.Spammer.Message}"><code>JDP.Spammer.post_message</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Trackers may implement this to be included in broadcast messages</p></div></div></section><footer><hr/><a class="previous" href="../repository/"><span class="direction">Previous</span><span class="title">Repository</span></a><a class="next" href="../development/"><span class="direction">Next</span><span class="title">Development</span></a></footer></article></body></html>
