<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User Preferences · JDP</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.svg" alt="JDP logo"/></a><h1>JDP</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../bug-tagging/">Bug Tagging</a></li><li class="current"><a class="toctext" href>User Preferences</a><ul class="internal"><li><a class="toctext" href="#OpenQA-1">OpenQA</a></li></ul></li><li><span class="toctext">Reference</span><ul><li><a class="toctext" href="../bugrefs/">BugRefs</a></li><li><a class="toctext" href="../conf/">Conf</a></li><li><a class="toctext" href="../functional/">Functional</a></li><li><a class="toctext" href="../repository/">Repository</a></li><li><a class="toctext" href="../trackers/">Trackers</a></li></ul></li><li><a class="toctext" href="../development/">Development</a></li><li><a class="toctext" href="../reports/">Reports</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>User Preferences</a></li></ul><a class="edit-page" href="https://github.com//blob/master/docs/src/user-preferences.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>User Preferences</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="User-Preferences-1" href="#User-Preferences-1">User Preferences</a></h1><p>While the majority of <a href="conf">JDP&#39;s config</a> is set in the conf directory on the JDP host. User preferences are taken from other, more accessible places. Where they can be written and read by other applications.</p><h2><a class="nav-anchor" id="OpenQA-1" href="#OpenQA-1">OpenQA</a></h2><p>Notifications preferences can be set by adding TOML sections to OpenQA job group descriptions. These are at least read by the <a href="reports/Report-Status-Diff.html">Status Difference</a> report which interprets the pattern strings as regular expressions and matches them against test names and suites. The script also takes the job group where the TOML was written into account, so notification settings are not shared between job groups. This means you can use the pattern &#39;.&#39; and it will notify you for all tests on a given job group and no others.</p><p>The functions below extract and interpret the TOML and show an example of what the TOML may look like.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.extract_toml" href="#JDP.Trackers.OpenQA.extract_toml"><code>JDP.Trackers.OpenQA.extract_toml</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">dict = extract_toml(&quot;text... &lt;code data-type=&#39;TOML&#39;&gt;[JDP.some.toml]&lt;br&gt; ... &lt;/code&gt;&quot;)</code></pre><p>Find the first instance of toml contained inside some text formatted for OpenQA job comments or group descriptions.</p><p>Only toml inside a the first code tag will be parsed. Code tags which don&#39;t have a <code>data-type</code> of TOML will be ignored. The <code>&lt;br&gt;</code> tags just effect the appearance in OpenQA. You should include them to make it readable.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="JDP.Trackers.OpenQA.load_notify_preferences" href="#JDP.Trackers.OpenQA.load_notify_preferences"><code>JDP.Trackers.OpenQA.load_notify_preferences</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">load_notify_preferences(from::String) -&gt; Array{JDP.Trackers.OpenQA.NotifyPref,1}
</code></pre><p>This loads and parses TOML formatted user notification preferences stored in the OpenQA job group descriptions. Each user can set one or more patterns which could be matched against test suit, test name, test flags, etc. or something else depending on the script.</p><p><strong>Arguments</strong></p><ul><li><code>from</code>: This is the TLA of the tracker (e.g. &quot;osd&quot;) where the         description text should be loaded from.</li></ul><p><strong>OpenQA Input</strong></p><p>The raw OpenQA job group description text should contain something like the following.</p><pre><code class="language-toml">&lt;code data-type=&#39;TOML&#39;&gt;
[JDP.notify.on-status-diff] &lt;br&gt;
rpalethorpe = [&#39;LTP&#39;, &#39;OpenQA&#39;] &lt;br&gt;
metan = &#39;.&#39; &lt;br&gt;
pvorel = &#39;LTP&#39; &lt;br&gt;
&lt;/code&gt;</code></pre><p>For each user name you can set a single string or a vector of strings. These may then be interpreted as plain text, globs or Regexs depending on the script.</p><p><strong>Returns</strong></p><p>This returns a vector of <a href="#JDP.Trackers.OpenQA.NotifyPref"><code>NotifyPref</code></a> structures. You may wish to call <a href="@ref"><code>Functional.groupby</code></a> on these to build an index.</p></div></div></section><footer><hr/><a class="previous" href="../bug-tagging/"><span class="direction">Previous</span><span class="title">Bug Tagging</span></a><a class="next" href="../bugrefs/"><span class="direction">Next</span><span class="title">BugRefs</span></a></footer></article></body></html>
